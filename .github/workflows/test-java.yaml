name: Test java (remove after use)
on: [push]
jobs:
  test-java:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - run: |
          git fetch --depth=1 origin +refs/tags/*:refs/tags/*
          git tag --list

      - uses: actions/checkout@v2
        with:
          repository: kepler16/actions
          ref: 43d6c96ddee8aa29a545846d926ba7b67114760e
          token: ${{secrets.GITHUB_TOKEN}}
          path: .github/actions

      - uses: ./.github/actions/setup-java
        with:
          token: ${{secrets.GITHUB_TOKEN}}

      - uses: ./.github/actions/setup-clojure
      - uses: ./.github/actions/setup-babashka
      - uses: ./.github/actions/setup-node

      - run: java --version
      - run: clojure --version
      - run: bb --version
      - run: node --version
      - run: npm --version
      - run: npm ci --ignore-scripts

      - id: semantic
        uses: ./.github/actions/semantic-version
        with:
          token: ${{secrets.GITHUB_TOKEN}}

      - run: |
          echo "current-version= ${{ steps.semantic.outputs.current-version }}"
          echo "next-version= ${{ steps.semantic.outputs.next-version }}"
